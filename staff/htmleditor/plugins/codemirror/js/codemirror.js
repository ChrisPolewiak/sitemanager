window.CodeMirror=function(){function n(a,b){if(!(this instanceof n))return new n(a,b);this.options=b=b||{};for(var c in mb)!b.hasOwnProperty(c)&&mb.hasOwnProperty(c)&&(b[c]=mb[c]);nb(b);c=this.display=Sc(a);c.wrapper.CodeMirror=this;Qb(this);b.autofocus&&E(this);var d=new Ea([new Fa([ka("",null,V(c))])]);this.view={doc:d,frontier:0,highlight:new ob,sel:{from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1,shift:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:q(d,0),maxLineLength:0,maxLineChanged:!1,
suppressEdits:!1,goalColumn:null,cantEdit:!1};this.nextOpId=0;Ga(this);Rb(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");this.setValue(b.value||"");aa&&setTimeout(I(ba,this,!0),20);this.view.history=pb();Tc(this);var e;try{e=document.activeElement==c.input}catch(f){}e||b.autofocus?setTimeout(I(W,this),20):qb(this);o(this,function(){for(var a in ca)if(ca.propertyIsEnumerable(a))ca[a](this,b[a],Sb);for(a=0;a<rb.length;++a)rb[a](this)})()}function Sc(a){var b={},c=b.input=
r("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");c.setAttribute("wrap","off");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");b.inputDiv=r("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");b.scrollbarH=r("div",[r("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");b.scrollbarV=r("div",[r("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");b.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler");
b.lineDiv=r("div");b.selectionDiv=r("div",null,null,"position: relative; z-index: 1");b.cursor=r("pre"," ","CodeMirror-cursor");b.otherCursor=r("pre"," ","CodeMirror-cursor CodeMirror-secondarycursor");b.measure=r("div",null,"CodeMirror-measure");b.lineSpace=r("div",[b.measure,b.selectionDiv,b.lineDiv,b.cursor,b.otherCursor],null,"position: relative; outline: none");b.mover=r("div",[r("div",[b.lineSpace],"CodeMirror-lines")],null,"position: relative");b.sizer=r("div",[b.mover],"CodeMirror-sizer");
b.heightForcer=r("div"," ",null,"position: absolute; height: "+la+"px");b.gutters=r("div",null,"CodeMirror-gutters");b.lineGutter=null;var d=r("div",[b.sizer,b.heightForcer,b.gutters],null,"position: relative; min-height: 100%");b.scroller=r("div",[d],"CodeMirror-scroll");b.scroller.setAttribute("tabIndex","-1");b.wrapper=r("div",[b.inputDiv,b.scrollbarH,b.scrollbarV,b.scrollbarFiller,b.scroller],"CodeMirror");ma&&(b.gutters.style.zIndex=-1,b.scroller.style.paddingRight=0);a.appendChild?a.appendChild(b.wrapper):
a(b.wrapper);sb&&(c.style.width="0px");Q||(b.scroller.draggable=!0);tb?(b.inputDiv.style.height="1px",b.inputDiv.style.position="absolute"):ma&&(b.scrollbarH.style.minWidth=b.scrollbarV.style.minWidth="18px");b.viewOffset=b.showingFrom=b.showingTo=b.lastSizeC=0;b.lineNumWidth=b.lineNumInnerWidth=b.lineNumChars=null;b.prevInput="";b.alignWidgets=!1;b.pollingFast=!1;b.poll=new ob;b.draggingText=!1;b.cachedCharWidth=b.cachedTextHeight=null;b.measureLineCache=[];b.measureLineCachePos=0;b.inaccurateSelection=
!1;b.pasteIncoming=!1;return b}function Ga(a){var b=a.view.doc;a.view.mode=n.getMode(a.options,a.options.mode);b.iter(0,b.size,function(a){a.stateAfter=null});a.view.frontier=0;Ha(a,100)}function Rb(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-")}function na(a){Qb(a);K(a,!0)}function Qb(a){var b=a.display.gutters,c=a.options.gutters;Ia(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(r("div",null,"CodeMirror-gutter "+
e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function Ja(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=oa(e);)d=d.find(),e=q(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=Ka(e);)d=d.find(),c-=e.text.length-d.from.ch,e=q(a,d.to.line),c+=e.text.length-d.to.ch;return c}function Tb(a){a.maxLine=q(a.doc,0);a.maxLineLength=Ja(a.doc,a.maxLine);a.maxLineChanged=!0;a.doc.iter(1,a.doc.size,function(b){var c=
Ja(a.doc,b);c>a.maxLineLength&&(a.maxLineLength=c,a.maxLine=b)})}function nb(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function Ub(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:La(b,d),to:La(b,a)}}function Vb(a,b){if(a.alignWidgets||
a.gutters.firstChild){var c=a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left;null!=b&&(c+=a.scroller.scrollLeft-b);for(var d=a.gutters.offsetWidth,e=c+"px",f=a.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.gutters.style.left=c+d+"px"}}function Uc(a){if(!a.options.lineNumbers)return!1;var b=""+a.options.lineNumberFormatter(a.view.doc.size-1+a.options.firstLineNumber),a=a.display;if(b.length!=a.lineNumChars){var c=
a.measure.appendChild(r("div",[r("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function K(a,b,c){var d=a.display.showingFrom,e=a.display.showingTo;if(b=Vc(a,b,c))da(a,a,"update",a),(a.display.showingFrom!=d||a.display.showingTo!=
e)&&da(a,a,"viewportChange",a,a.display.showingFrom,a.display.showingTo);Wb(a);d=a.display;a=a.view.doc.height+2*d.lineSpace.offsetTop;d.sizer.style.minHeight=d.heightForcer.style.top=a+"px";a=Math.max(a,d.scroller.scrollHeight);e=d.scroller.scrollWidth>d.scroller.clientWidth;(c=a>d.scroller.clientHeight)?(d.scrollbarV.style.display="block",d.scrollbarV.style.bottom=e?Ma(d.measure)+"px":"0",d.scrollbarV.firstChild.style.height=a-d.scroller.clientHeight+d.scrollbarV.clientHeight+"px"):d.scrollbarV.style.display=
"";e?(d.scrollbarH.style.display="block",d.scrollbarH.style.right=c?Ma(d.measure)+"px":"0",d.scrollbarH.firstChild.style.width=d.scroller.scrollWidth-d.scroller.clientWidth+d.scrollbarH.clientWidth+"px"):d.scrollbarH.style.display="";e&&c?(d.scrollbarFiller.style.display="block",d.scrollbarFiller.style.height=d.scrollbarFiller.style.width=Ma(d.measure)+"px"):d.scrollbarFiller.style.display="";Wc&&0===Ma(d.measure)&&(d.scrollbarV.style.minWidth=d.scrollbarH.style.minHeight=Xc?"18px":"12px");return b}
function Vc(a,b,c){var d=a.display,e=a.view.doc;if(d.wrapper.clientWidth){var f=Ub(d,e,c);if(!(!0!==b&&0==b.length&&f.from>d.showingFrom&&f.to<d.showingTo)){b&&Uc(a)&&(b=!0);d.sizer.style.marginLeft=d.scrollbarH.style.left=d.gutters.offsetWidth+"px";if(!0!==b&&pa)for(var g=0;g<b.length;++g)for(var h=b[g];c=oa(q(e,h.from));)c=c.find().from.line,h.diff&&(h.diff-=h.from-c),h.from=c;h=!0===b?0:Infinity;if(a.options.lineNumbers&&b&&!0!==b)for(g=0;g<b.length;++g)if(b[g].diff){h=b[g].from;break}c=Math.max(f.from-
a.options.viewportMargin,0);f=Math.min(e.size,f.to+a.options.viewportMargin);d.showingFrom<c&&20>c-d.showingFrom&&(c=d.showingFrom);d.showingTo>f&&20>d.showingTo-f&&(f=Math.min(e.size,d.showingTo));if(pa)for(c=F(Na(e,q(e,c)));f<e.size&&R(q(e,f));)++f;for(var b=!0===b?[]:Yc([{from:d.showingFrom,to:d.showingTo}],b),k=0,g=0;g<b.length;++g){var j=b[g];j.from<c&&(j.from=c);j.to>f&&(j.to=f);j.from>=j.to?b.splice(g--,1):k+=j.to-j.from}if(!(k==f-c&&c==d.showingFrom&&f==d.showingTo)){b.sort(function(a,b){return a.from-
b.from});k<0.7*(f-c)&&(d.lineDiv.style.display="none");Zc(a,c,f,b,h);d.lineDiv.style.display="";if(c!=d.showingFrom||f!=d.showingTo||d.lastSizeC!=d.wrapper.clientHeight)d.lastSizeC=d.wrapper.clientHeight;d.showingFrom=c;d.showingTo=f;Ha(a,100);g=d.lineDiv.offsetTop;for(b=d.lineDiv.firstChild;b;b=b.nextSibling)b.lineObj&&(ma?(f=b.offsetTop+b.offsetHeight,h=f-g,g=f):(h=b.getBoundingClientRect(),h=h.bottom-h.top),f=b.lineObj.height-h,2>h&&(h=V(d)),(0.001<f||-0.001>f)&&S(b.lineObj,h));d.viewOffset=qa(a,
q(e,c));d.mover.style.top=d.viewOffset+"px";return!0}}}else d.showingFrom=d.showingTo=d.viewOffset=0}function Yc(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,k=a.length;h<k;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function $c(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,
++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:b.scroller.getBoundingClientRect().left-b.sizer.getBoundingClientRect().left,gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Zc(a,b,c,d,e){function f(b){var c=b.nextSibling;Q&&ea&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):j.removeChild(b);return c}var g=$c(a),h=a.display,k=a.options.lineNumbers;!d.length&&(!aa&&
(!Q||!a.display.currentWheelTarget))&&Ia(h.lineDiv);var j=h.lineDiv,i=j.firstChild,l=d.shift(),m=b;for(a.view.doc.iter(b,c,function(b){l&&l.to==m&&(l=d.shift());if(R(b))0!=b.height&&S(b,0);else if(l&&l.from<=m&&l.to>m){for(;i.lineObj!=b;)i=f(i);k&&(e<=m&&i.lineNumber)&&Xb(i.lineNumber,""+a.options.lineNumberFormatter(m+a.options.firstLineNumber));i=i.nextSibling}else{var c;c=a;var h=m,n=Yb(c,b),t=b.gutterMarkers,q=c.display;if(!c.options.lineNumbers&&!t&&!b.bgClass&&!b.wrapClass&&(!b.widgets||!b.widgets.length))c=
n;else{var o=r("div",null,b.wrapClass,"position: relative");if(c.options.lineNumbers||t){var Oa=o.appendChild(r("div",null,null,"position: absolute; left: "+g.fixedPos+"px"));o.alignable=[Oa];if(c.options.lineNumbers&&(!t||!t["CodeMirror-linenumbers"]))o.lineNumber=Oa.appendChild(r("div",""+c.options.lineNumberFormatter(h+c.options.firstLineNumber),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+q.lineNumInnerWidth+"px"));if(t)for(h=0;h<
c.options.gutters.length;++h){var q=c.options.gutters[h],y=t.hasOwnProperty(q)&&t[q];y&&Oa.appendChild(r("div",[y],"CodeMirror-gutter-elt","left: "+g.gutterLeft[q]+"px; width: "+g.gutterWidth[q]+"px"))}}b.bgClass&&o.appendChild(r("div"," ",b.bgClass+" CodeMirror-linebackground"));o.appendChild(n);if(b.widgets){t=0;for(h=b.widgets;t<h.length;++t){q=h[t];y=r("div",[q.node],"CodeMirror-linewidget");y.widget=q;if(q.noHScroll){(o.alignable||(o.alignable=[])).push(y);var z=g.wrapperWidth;y.style.left=g.fixedPos+
"px";q.coverGutter||(z-=g.gutterTotalWidth,y.style.paddingLeft=g.gutterTotalWidth+"px");y.style.width=z+"px"}q.coverGutter&&(y.style.zIndex=5,y.style.position="relative",q.noHScroll||(y.style.marginLeft=-g.gutterTotalWidth+"px"));q.above?o.insertBefore(y,c.options.lineNumbers&&0!=b.height?Oa:n):o.appendChild(y)}}ma&&(o.style.zIndex=2);c=o}j.insertBefore(c,i);c.lineObj=b}++m});i;)i=f(i)}function T(a){return a.sel.inverted?a.sel.from:a.sel.to}function Wb(a){var b;if(u(a.view.sel.from,a.view.sel.to)){b=
a.display;var c=L(a,a.view.sel.from,"div");b.cursor.style.left=c.left+"px";b.cursor.style.top=c.top+"px";b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px";b.cursor.style.display="";b.selectionDiv.style.display="none";c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=0.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none";b=c}else b=ad(a);var a=a.display,
c=a.wrapper.getBoundingClientRect(),d=a.lineDiv.getBoundingClientRect();a.inputDiv.style.top=Math.max(0,Math.min(a.wrapper.clientHeight-10,b.top+d.top-c.top))+"px";a.inputDiv.style.left=Math.max(0,Math.min(a.wrapper.clientWidth-10,b.left+d.left-c.left))+"px"}function ad(a){function b(a,b,c,d){0>b&&(b=0);g.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f,g){var j=q(e,c),i=j.text.length,
l=g?Infinity:-Infinity;bd(M(j),d||0,null==f?i:f,function(e,m,q){var o=Pa(a,{line:c,ch:"rtl"==q?m-1:e},"div",j),q=Pa(a,{line:c,ch:"rtl"==q?e:m-1},"div",j),n=o.left,r=q.right;3<q.top-o.top&&(b(n,o.top,null,o.bottom),n=k,o.bottom<q.top&&b(n,o.bottom,null,q.top));null==f&&m==i&&(r=h);null==d&&0==e&&(n=k);l=g?Math.min(q.top,l):Math.max(q.bottom,l);n<k+1&&(n=k);b(n,q.top,r-n,q.bottom)});return l}var d=a.display,e=a.view.doc,f=a.view.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,k=ac(a.display);
if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{for(var j=q(e,f.from.line),i=j,l=[f.from.line,f.from.ch],m;i=Ka(i);){i=i.find();l.push(i.from.ch,i.to.line,i.to.ch);if(i.to.line==f.to.line){l.push(f.to.ch);m=!0;break}i=q(e,i.to.line)}if(m)for(f=0;f<l.length;f+=3)c(l[f],l[f+1],l[f+2]);else l=q(e,f.to.line),j=f.from.ch?c(f.from.line,f.from.ch,null,!1):qa(a,j)-d.viewOffset,f=f.to.ch?c(f.to.line,oa(l)?null:0,f.to.ch,!0):qa(a,l)-d.viewOffset,j<f&&b(k,j,null,f)}X(d.selectionDiv,g);d.cursor.style.display=
d.otherCursor.style.display="none";d.selectionDiv.style.display="";return L(a,T(a.view),"div")}function Qa(a){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}function Ha(a,b){a.view.frontier<a.display.showingTo&&a.view.highlight.set(b,I(cd,a))}function cd(a){var b=a.view,c=b.doc;if(!(b.frontier>=a.display.showingTo)){var d=
+new Date+a.options.workTime,e=fa(b.mode,ra(a,b.frontier)),f=[],g;c.iter(b.frontier,Math.min(c.size,a.display.showingTo+500),function(c){b.frontier>=a.display.showingFrom?(bc(a,c,e)&&b.frontier>=a.display.showingFrom&&(g&&g.end==b.frontier?g.end++:f.push(g={start:b.frontier,end:b.frontier+1})),c.stateAfter=fa(b.mode,e)):(cc(a,c,e),c.stateAfter=0==b.frontier%5?fa(b.mode,e):null);++b.frontier;if(+new Date>d)return Ha(a,a.options.workDelay),!0});f.length&&o(a,function(){for(var a=0;a<f.length;++a)U(this,
f[a].start,f[a].end)})()}}function dd(a,b){for(var c,d,e=a.view.doc,f=b,g=b-100;f>g;--f){if(0==f)return 0;var h=q(e,f-1);if(h.stateAfter)return f;h=ga(h.text,null,a.options.tabSize);if(null==d||c>h)d=f-1,c=h}return d}function ra(a,b){var c=a.view,d=dd(a,b),e=d&&q(c.doc,d-1).stateAfter,e=e?fa(c.mode,e):dc(c.mode);c.doc.iter(d,b,function(f){cc(a,f,e);f.stateAfter=d==b-1||0==d%5||d>=c.showingFrom&&d<c.showingTo?fa(c.mode,e):null;++d});return e}function ac(a){return X(a.measure,r("pre")).appendChild(r("span",
"x")).offsetLeft}function ub(a,b,c,d){d=d||vb(a,b);a=-1;for(b=c;;b+=a){var e=d[b];if(e)break;0>a&&0==b&&(a=1)}return{left:b<c?e.right:e.left,right:b>c?e.left:e.right,top:e.top,bottom:e.bottom}}function vb(a,b){for(var c=a.display,d=a.display.measureLineCache,e=0;e<d.length;++e){var f=d[e];if(f.text==b.text&&f.markedSpans==b.markedSpans&&c.scroller.clientWidth==f.width)return f.measure}var e=a.display,g=ec(b.text.length),h=Yb(a,b,g);X(e.measure,h);for(var k=e.lineDiv.getBoundingClientRect(),f=[],e=
ec(b.text.length),j=h.offsetHeight,h=0;h<g.length;++h)if(g[h]){for(var i=g[h].getBoundingClientRect(),l=Math.max(0,i.top-k.top),m=Math.min(i.bottom-k.top,j),p=0;p<f.length;p+=2){var q=f[p],o=f[p+1];if(!(q>m||o<l))if(q<=l&&o>=m||l<=q&&m>=o||Math.min(m,o)-Math.max(l,q)>=m-l>>1){f[p]=Math.min(l,q);f[p+1]=Math.max(m,o);break}}p==f.length&&f.push(l,m);e[h]={left:i.left-k.left,right:i.right-k.left,top:p}}for(h=0;h<e.length;++h)if(g=e[h])k=g.top,g.top=f[k],g.bottom=f[k+1];f={text:b.text,width:c.scroller.clientWidth,
markedSpans:b.markedSpans,measure:e};16==d.length?d[++c.measureLineCachePos%16]=f:d.push(f);return e}function Ra(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0}function fc(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=b.widgets[e].node.offsetHeight;c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=qa(a,b);"local"!=d&&(b-=a.display.viewOffset);"page"==d&&(a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+(window.pageYOffset||
(document.documentElement||document.body).scrollTop),a=a.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=a,c.right+=a);c.top+=b;c.bottom+=b;return c}function Pa(a,b,c,d){d||(d=q(a.view.doc,b.line));return fc(a,d,ub(a,d,b.ch),c)}function L(a,b,c,d,e){function f(b,f){var g=ub(a,d,b,e);f?g.left=g.right:g.right=g.left;return fc(a,d,g,c)}d=d||q(a.view.doc,b.line);e||(e=vb(a,d));var g=M(d),b=b.ch;if(!g)return f(b);for(var h,k,j=g[0].level,i=0;i<g.length;++i){var l=
g[i],m=l.level%2,p;if(l.from<b&&l.to>b)return f(b,m);var o=m?l.from:l.to;if((m?l.to:l.from)==b)l=i&&l.level<(p=g[i-1]).level?f(p.level%2?p.from:p.to-1,!0):f(m&&l.from!=l.to?b-1:b),m==j?h=l:k=l;else if(o==b&&(p=i<g.length-1&&g[i+1],m||!(p&&p.from==p.to)))l=p&&l.level<p.level?f(p.level%2?p.to-1:p.from):f(m?b:b-1,!0),m==j?h=l:k=l}j&&!b&&(k=f(g[0].to-1));if(!h)return k;k&&(h.other=k);return h}function wb(a,b,c){var d=a.view.doc,c=c+a.display.viewOffset;if(0>c)return{line:0,ch:0,outside:!0};var e=La(d,
c);if(e>=d.size)return{line:d.size-1,ch:q(d,d.size-1).text.length};for(0>b&&(b=0);;){var f=q(d,e),e=ed(a,f,e,b,c),g=Ka(f);if(g&&e.ch==sa(f))e=g.find().to.line;else return e}}function ed(a,b,c,d,e){function f(d){d=L(a,{line:c,ch:d},"line",b,j);h=!0;if(g>d.bottom)return Math.max(0,d.left-k);if(g<d.top)return d.left+k;h=!1;return d.left}var g=e-qa(a,b),h=!1,k=a.display.wrapper.clientWidth,j=vb(a,b),i=M(b),l=b.text.length,e=Sa(b),m=sa(b),p=ac(a.display),q=f(m);if(d>q)return{line:c,ch:m,outside:h};for(;;){if(i?
m==e||m==xb(b,e,1):1>=m-e){for(e=(d=d-p<q-d)?e:m;yb.test(b.text.charAt(e));)++e;return{line:c,ch:e,after:d,outside:h}}var o=Math.ceil(l/2),n=e+o;if(i)for(var n=e,r=0;r<o;++r)n=xb(b,n,1);r=f(n);r>d?(m=n,q=r,h&&(q+=1E3),l-=o):(e=n,p=r,l=o)}}function V(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Y){Y=r("pre");for(var b=0;49>b;++b)Y.appendChild(document.createTextNode("x")),Y.appendChild(r("br"));Y.appendChild(document.createTextNode("x"))}X(a.measure,Y);b=Y.offsetHeight/50;3<b&&
(a.cachedTextHeight=b);Ia(a.measure);return b||1}function gc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=r("span","x"),c=r("pre",[b]);X(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function zb(a){a.curOp?++a.curOp.depth:a.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++a.nextOpId}}function Ab(a){var b=a.curOp;if(!--b.depth){a.curOp=null;var c=a.view,d=a.display;b.updateMaxLine&&
Tb(c);if(c.maxLineChanged&&!a.options.lineWrapping){var e=ub(a,c.maxLine,c.maxLine.text.length).right;d.sizer.style.minWidth=e+3+la+"px";c.maxLineChanged=!1}var f,g;b.selectionChanged&&(d=L(a,T(c)),f=hc(a,d.left,d.top,d.left,d.bottom));if(b.changes.length||f&&null!=f.scrollTop)g=K(a,b.changes,f&&f.scrollTop);!g&&b.selectionChanged&&Wb(a);if(f&&(d=a.view,g=L(a,T(d)),Bb(a,g.left,g.top,g.left,g.bottom),d.focused)){d=a.display;f=d.sizer.getBoundingClientRect();e=null;if(0>g.top+f.top)e=!0;else if(g.bottom+
f.top>(window.innerHeight||document.documentElement.clientHeight))e=!1;if(null!=e&&!fd){if(f="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=g.left+"px",d.cursor.style.top=g.top-d.viewOffset+"px";d.cursor.scrollIntoView(e);f&&(d.cursor.style.display="none")}}b.selectionChanged&&Qa(a);c.focused&&b.updateInput&&ba(a,b.userSelChange);b.textChanged&&ha(a,"change",a,b.textChanged);b.selectionChanged&&ha(a,"cursorActivity",a);for(c=0;c<b.delayedCallbacks.length;++c)b.delayedCallbacks[c](a)}}
function o(a,b){return function(){var c=a||this;zb(c);try{var d=b.apply(c,arguments)}finally{Ab(c)}return d}}function U(a,b,c,d){a.curOp.changes.push({from:b,to:c,diff:d})}function Ta(a){a.view.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Cb(a);a.view.focused&&Ta(a)})}function ta(a){function b(){!Cb(a)&&!c?(c=!0,a.display.poll.set(60,b)):(a.display.pollingFast=!1,Ta(a))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Cb(a){var b=a.display.input,c=a.display.prevInput,
d=a.view,e=d.sel;if(!d.focused||gd(b)||ua(a))return!1;var f=b.value;if(f==c&&u(e.from,e.to))return!1;zb(a);d.sel.shift=null;for(var g=0,h=Math.min(c.length,f.length);g<h&&c[g]==f[g];)++g;g<c.length?e.from={line:e.from.line,ch:e.from.ch-(c.length-g)}:d.overwrite&&(u(e.from,e.to)&&!a.display.pasteIncoming)&&(e.to={line:e.to.line,ch:Math.min(q(a.view.doc,e.to.line).text.length,e.to.ch+(f.length-g))});c=a.curOp.updateInput;Db(a,e.from,e.to,va(f.slice(g)),"end",a.display.pasteIncoming?"paste":"input");
a.curOp.updateInput=c;1E3<f.length?b.value=a.display.prevInput="":a.display.prevInput=f;Ab(a);a.display.pasteIncoming=!1;return!0}function ba(a,b){var c=a.view,d,e;u(c.sel.from,c.sel.to)?b&&(a.display.prevInput=a.display.input.value=""):(a.display.prevInput="",d=ic&&(100<c.sel.to.line-c.sel.from.line||1E3<(e=a.getSelection()).length),a.display.input.value=d?"-":e||a.getSelection(),c.focused&&jc(a.display.input));a.display.inaccurateSelection=d}function E(a){"nocursor"!=a.options.readOnly&&a.display.input.focus()}
function ua(a){return a.options.readOnly||a.view.cantEdit}function Tc(a){function b(){a.view.focused&&setTimeout(I(E,a),0)}function c(b){(!a.options.onDragEvent||!a.options.onDragEvent(a,wa(b)))&&Ua(b)}function d(){e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=a.getSelection(),jc(e.input))}var e=a.display;s(e.scroller,"mousedown",o(a,hd));s(e.scroller,"dblclick",o(a,A));s(e.lineSpace,"selectstart",function(a){kc(e,a)||A(a)});Z||s(e.scroller,"contextmenu",function(b){lc(a,
b)});s(e.scroller,"scroll",function(){Eb(a,e.scroller.scrollTop);Fb(a,e.scroller.scrollLeft);ha(a,"scroll",a)});s(e.scrollbarV,"scroll",function(){Eb(a,e.scrollbarV.scrollTop)});s(e.scrollbarH,"scroll",function(){Fb(a,e.scrollbarH.scrollLeft)});s(e.scroller,"mousewheel",function(b){mc(a,b)});s(e.scroller,"DOMMouseScroll",function(b){mc(a,b)});s(e.scrollbarH,"mousedown",b);s(e.scrollbarV,"mousedown",b);s(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});s(window,"resize",function g(){e.cachedCharWidth=
e.cachedTextHeight=null;Ra(a);e.wrapper.parentNode?K(a,!0):N(window,"resize",g)});s(e.input,"keyup",o(a,function(b){if((!a.options.onKeyEvent||!a.options.onKeyEvent(a,wa(b)))&&16==C(b,"keyCode"))a.view.sel.shift=null}));s(e.input,"input",I(ta,a));s(e.input,"keydown",o(a,nc));s(e.input,"keypress",o(a,id));s(e.input,"focus",I(W,a));s(e.input,"blur",I(qb,a));a.options.dragDrop&&(s(e.scroller,"dragstart",function(b){var c=a.getSelection();b.dataTransfer.setData("Text",c);b.dataTransfer.setDragImage&&
b.dataTransfer.setDragImage(r("img"),0,0)}),s(e.scroller,"dragenter",c),s(e.scroller,"dragover",c),s(e.scroller,"drop",o(a,jd)));s(e.scroller,"paste",function(){E(a);ta(a)});s(e.input,"paste",function(){e.pasteIncoming=true;ta(a)});s(e.input,"cut",d);s(e.input,"copy",d);tb&&s(e.sizer,"mouseup",function(){document.activeElement==e.input&&e.input.blur();E(a)})}function kc(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(/\bCodeMirror-(?:line)?widget\b/.test(c.className)||c.parentNode==
a.sizer&&c!=a.mover)return!0}function xa(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller))return null;var e,f,d=d.lineSpace.getBoundingClientRect();try{e=b.clientX,f=b.clientY}catch(g){return null}return wb(a,e-d.left,f-d.top)}function hd(a){function b(a){if("single"==l)B(e,j,a);else if("double"==l){var b=oc(q(k,a.line).text,a);x(a,n)?B(e,b.from,r):B(e,n,b.to)}else"triple"==l&&(x(a,
n)?B(e,r,w(k,{line:a.line,ch:0})):B(e,n,w(k,{line:a.line+1,ch:0})))}function c(a){var d=++t,h=xa(e,a,!0);if(h)if(u(h,m)){var j=a.clientY<v.top?-20:a.clientY>v.bottom?20:0;j&&setTimeout(o(e,function(){t==d&&(f.scroller.scrollTop+=j,c(a))}),50)}else{g.focused||W(e);m=h;b(h);var i=Ub(f,k);(h.line>=i.to||h.line<i.from)&&setTimeout(o(e,function(){t==d&&c(a)}),150)}}function d(a){t=Infinity;var c=xa(e,a);c&&b(c);A(a);E(e);N(document,"mousemove",Zb);N(document,"mouseup",$b)}var e=this,f=e.display,g=e.view,
h=g.sel,k=g.doc;pc(e.view,C(a,"shiftKey"));if(kc(f,a))Q||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100));else if(!kd(e,a)){var j=xa(e,a);switch(qc(a)){case 3:Z&&lc.call(e,e,a);return;case 2:j&&B(e,j,j);setTimeout(I(E,e),20);A(a);return}if(j){g.focused||W(e);var i=+new Date,l="single";Va&&Va.time>i-400&&u(Va.pos,j)?(l="triple",A(a),setTimeout(I(E,e),20),ld(e,j.line)):Wa&&Wa.time>i-400&&u(Wa.pos,j)?(l="double",Va={time:i,pos:j},A(a),i=oc(q(k,j.line).text,j),B(e,i.from,
i.to)):Wa={time:i,pos:j};var m=j;if(e.options.dragDrop&&md&&!ua(e)&&!u(h.from,h.to)&&!x(j,h.from)&&!x(h.to,j)&&"single"==l){var p=o(e,function(b){if(Q)f.scroller.draggable=false;g.draggingText=false;N(document,"mouseup",p);N(f.scroller,"drop",p);if(Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10){A(b);B(e,j,j);E(e)}});Q&&(f.scroller.draggable=!0);g.draggingText=p;f.scroller.dragDrop&&f.scroller.dragDrop();s(document,"mouseup",p);s(f.scroller,"drop",p)}else{A(a);"single"==l&&B(e,j,j);
var n=h.from,r=h.to,v=f.wrapper.getBoundingClientRect(),t=0,Zb=o(e,function(a){!aa&&!qc(a)?d(a):c(a)}),$b=o(e,d);s(document,"mousemove",Zb);s(document,"mouseup",$b)}}else(a.target||a.srcElement)==f.scroller&&A(a)}}function jd(a){var b=this;if(!b.options.onDragEvent||!b.options.onDragEvent(b,wa(a))){A(a);var c=xa(b,a,!0),d=a.dataTransfer.files;if(c&&!ua(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,a=function(a,d){var h=new FileReader;h.onload=function(){f[d]=
h.result;++g==e&&(c=w(b.view.doc,c),o(b,function(){var a=O(b,f.join(""),c,c,"paste");B(b,c,a)})())};h.readAsText(a)},h=0;h<e;++h)a(d[h],h);else if(b.view.draggingText&&!x(c,b.view.sel.from)&&!x(b.view.sel.to,c))b.view.draggingText(a),aa&&setTimeout(I(E,b),50);else try{if(f=a.dataTransfer.getData("Text")){var h=b.view.sel.from,k=b.view.sel.to;B(b,c,c);b.view.draggingText&&O(b,"",h,k,"paste");b.replaceSelection(f,null,"paste");E(b);W(b)}}catch(j){}}}function kd(a,b){var c=a.display;try{var d=b.clientX,
e=b.clientY}catch(f){return!1}if(d>=Math.floor(c.gutters.getBoundingClientRect().right))return!1;A(b);if(!rc(a,"gutterClick"))return!0;var g=c.lineDiv.getBoundingClientRect();if(e>g.bottom)return!0;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&h.getBoundingClientRect().right>=d){c=La(a.view.doc,e);da(a,a,"gutterClick",a,c,a.options.gutters[g],b);break}}return!0}function Eb(a,b){2>Math.abs(a.view.scrollTop-b)||(a.view.scrollTop=b,Z||K(a,[],b),a.display.scroller.scrollTop!=
b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Z&&K(a,[]))}function Fb(a,b){2>Math.abs(a.view.scrollLeft-b)||(a.view.scrollLeft=b,a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b),Vb(a.display))}function mc(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&(b.detail&&b.axis==b.HORIZONTAL_AXIS)&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?
d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display.scroller;if(d&&null!=J){var f=d*J,g=a.view.scrollTop,h=g+a.display.wrapper.clientHeight;0>f?g=Math.max(0,g+f-50):h=Math.min(a.view.doc.height,h+f+50);if(ea&&Q)for(f=b.target;f!=e;f=f.parentNode)if(f.lineObj){a.display.currentWheelTarget=f;break}K(a,[],{top:g,bottom:h})}c&&null!=J&&(g=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,c*J+e.scrollLeft)),g!=e.scrollLeft&&Vb(a.display,g));20>Xa&&(null==Ya?(Ya=e.scrollLeft,Gb=e.scrollTop,ya=c,za=d,setTimeout(function(){var a=
e.scrollLeft-Ya,b=e.scrollTop-Gb,a=b&&za&&b/za||a&&ya&&a/ya;Ya=Gb=null;if(a){J=(J*Xa+a)/(Xa+1);++Xa}},200)):(ya+=c,za+=d))}function Za(a,b,c){if("string"==typeof b&&(b=Hb[b],!b))return!1;a.display.pollingFast&&Cb(a)&&(a.display.pollingFast=!1);var d=a.view,e=d.sel.shift;try{ua(a)&&(d.suppressEdits=!0),c&&(d.sel.shift=null),b(a)}catch(f){if(f!=sc)throw f;return!1}finally{d.sel.shift=e,d.suppressEdits=!1}return!0}function tc(a,b){function c(){h=!0}var d=Ib(a.options.keyMap),e=d.auto;clearTimeout(uc);
e&&!vc(b)&&(uc=setTimeout(function(){Ib(a.options.keyMap)==d&&(a.options.keyMap=e.call?e.call(null,a):e)},50));var f=$[C(b,"keyCode")],g=!1,g=ea&&(Aa||nd);if(null==f||b.altGraphKey)return!1;C(b,"altKey")&&(f="Alt-"+f);if(C(b,g?"metaKey":"ctrlKey"))f="Ctrl-"+f;if(C(b,g?"ctrlKey":"metaKey"))f="Cmd-"+f;var h=!1,g=C(b,"shiftKey")?$a("Shift-"+f,a.options.extraKeys,a.options.keyMap,function(b){return Za(a,b,!0)},c)||$a(f,a.options.extraKeys,a.options.keyMap,function(b){if("string"==typeof b&&/^go[A-Z]/.test(b))return Za(a,
b)},c):$a(f,a.options.extraKeys,a.options.keyMap,function(b){return Za(a,b)},c);h&&(g=!1);g&&(A(b),Qa(a),ab&&(b.oldKeyCode=b.keyCode,b.keyCode=0));return g}function od(a,b,c){if(c=$a("'"+c+"'",a.options.extraKeys,a.options.keyMap,function(b){return Za(a,b,!0)}))A(b),Qa(a);return c}function nc(a){this.view.focused||W(this);aa&&27==a.keyCode&&(a.returnValue=!1);if(!this.options.onKeyEvent||!this.options.onKeyEvent(this,wa(a))){var b=C(a,"keyCode");pc(this.view,16==b||C(a,"shiftKey"));var c=tc(this,
a);Aa&&(Jb=c?b:null,!c&&(88==b&&!ic&&C(a,ea?"metaKey":"ctrlKey"))&&this.replaceSelection(""))}}function id(a){var b=this;if(!b.options.onKeyEvent||!b.options.onKeyEvent(b,wa(a))){var c=C(a,"keyCode"),d=C(a,"charCode");if(Aa&&c==Jb)Jb=null,A(a);else if(!(Aa&&(!a.which||10>a.which)||tb)||!tc(b,a))c=String.fromCharCode(null==d?c:d),this.options.electricChars&&(this.view.mode.electricChars&&this.options.smartIndent&&!ua(this)&&-1<this.view.mode.electricChars.indexOf(c))&&setTimeout(o(b,function(){bb(b,
b.view.sel.to.line,"smart")}),75),od(b,a,c)||ta(b)}}function W(a){"nocursor"!=a.options.readOnly&&(a.view.focused||(ha(a,"focus",a),a.view.focused=!0,-1==a.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(a.display.scroller.className+=" CodeMirror-focused"),ba(a,!0)),Ta(a),Qa(a))}function qb(a){a.view.focused&&(ha(a,"blur",a),a.view.focused=!1,a.display.scroller.className=a.display.scroller.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){if(!a.view.focused)a.view.sel.shift=
null},150)}function lc(a,b){function c(){d.inputDiv.style.position="relative";d.input.style.cssText=h;ab&&(d.scrollbarV.scrollTop=d.scroller.scrollTop=g);Ta(a);if(null!=d.input.selectionStart){clearTimeout(Kb);var b=d.input.value=" "+(u(e.from,e.to)?"":d.input.value),c=0;d.prevInput=" ";d.input.selectionStart=1;d.input.selectionEnd=b.length;Kb=setTimeout(function l(){d.prevInput==" "&&d.input.selectionStart==0?o(a,Hb.selectAll)(a):c++<10?Kb=setTimeout(l,500):ba(a)},200)}}var d=a.display,e=a.view.sel,
f=xa(a,b),g=d.scroller.scrollTop;if(f&&!Aa){(u(e.from,e.to)||x(f,e.from)||!x(f,e.to))&&o(a,ia)(a,f,f);var h=d.input.style.cssText;d.inputDiv.style.position="absolute";d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";E(a);ba(a,!0);u(e.from,e.to)&&(d.input.value=d.prevInput=" ");Z?(Ua(b),s(window,
"mouseup",function j(){N(window,"mouseup",j);setTimeout(c,20)})):setTimeout(c,50)}}function Db(a,b,c,d,e,f){var g=wc&&pd(a.view.doc,b,c);if(g){for(b=g.length-1;1<=b;--b)cb(a,g[b].from,g[b].to,[""],f);if(g.length)return cb(a,g[0].from,g[0].to,d,e,f)}else return cb(a,b,c,d,e,f)}function cb(a,b,c,d,e,f){if(!a.view.suppressEdits){var g=a.view,h=[];g.doc.iter(b.line,c.line+1,function(a){h.push(Ba(a.text,a.markedSpans))});var k=g.sel.from,j=g.sel.to,i=qd(G(h[0]),G(H(h)),b.ch,c.ch,d),c=xc(a,b,c,i,e,f);g.history&&
rd(a,b.line,d.length,h,f,k,j,g.sel.from,g.sel.to);return c}}function yc(a,b){var c=a.view.doc,d=a.view.history,e=("undo"==b?d.done:d.undone).pop();if(e){for(var f={events:[],fromBefore:e.fromAfter,toBefore:e.toAfter,fromAfter:e.fromBefore,toAfter:e.toBefore},g=e.events.length-1;0<=g;g-=1){d.dirtyCounter+="undo"==b?-1:1;var h=e.events[g],k=[],j=h.start+h.added;c.iter(h.start,j,function(a){k.push(Ba(a.text,a.markedSpans))});f.events.push({start:h.start,added:h.old.length,old:k});var i=g?null:{from:e.fromBefore,
to:e.toBefore};xc(a,{line:h.start,ch:0},{line:j-1,ch:q(c,j-1).text.length},h.old,i,b)}("undo"==b?d.undone:d.done).push(f)}}function xc(a,b,c,d,e,f){var g=a.view,h=g.doc,k=a.display;if(!g.suppressEdits){var j=c.line-b.line,i=q(h,b.line),l=q(h,c.line),m=!1,p=b.line;a.options.lineWrapping||(p=F(Na(h,i)),h.iter(p,c.line+1,function(a){if(Ja(h,a)==g.maxLineLength)return m=!0}));var o=H(d),n=V(k);if(0==b.ch&&0==c.ch&&""==D(o)){for(var r=[],t=0,s=d.length-1;t<s;++t)r.push(ka(D(d[t]),G(d[t]),n));ja(a,l,l.text,
G(o));j&&h.remove(b.line,j,a);r.length&&h.insert(b.line,r)}else if(i==l)if(1==d.length)ja(a,i,i.text.slice(0,b.ch)+D(d[0])+i.text.slice(c.ch),G(d[0]));else{r=[];t=1;for(s=d.length-1;t<s;++t)r.push(ka(D(d[t]),G(d[t]),n));r.push(ka(D(o)+i.text.slice(c.ch),G(o),n));ja(a,i,i.text.slice(0,b.ch)+D(d[0]),G(d[0]));h.insert(b.line+1,r)}else if(1==d.length)ja(a,i,i.text.slice(0,b.ch)+D(d[0])+l.text.slice(c.ch),G(d[0])),h.remove(b.line+1,j,a);else{r=[];ja(a,i,i.text.slice(0,b.ch)+D(d[0]),G(d[0]));ja(a,l,D(o)+
l.text.slice(c.ch),G(o));t=1;for(s=d.length-1;t<s;++t)r.push(ka(D(d[t]),G(d[t]),n));1<j&&h.remove(b.line+1,j-1,a);h.insert(b.line+1,r)}if(a.options.lineWrapping){var v=Math.max(5,k.scroller.clientWidth/gc(k)-3);h.iter(b.line,b.line+d.length,function(a){if(a.height!=0){var b=(Math.ceil(a.text.length/v)||1)*n;b!=a.height&&S(a,b)}})}else h.iter(p,b.line+d.length,function(a){var b=Ja(h,a);if(b>g.maxLineLength){g.maxLine=a;g.maxLineLength=b;g.maxLineChanged=true;m=false}}),m&&(a.curOp.updateMaxLine=!0);
g.frontier=Math.min(g.frontier,b.line);Ha(a,400);var u=d.length-j-1;U(a,b.line,c.line+1,u);if(rc(a,"change")){for(t=0;t<d.length;++t)"string"!=typeof d[t]&&(d[t]=d[t].text);f={from:b,to:c,text:d,origin:f};if(a.curOp.textChanged){for(k=a.curOp.textChanged;k.next;k=k.next);k.next=f}else a.curOp.textChanged=f}var y={line:b.line+d.length-1,ch:D(o).length+(1==d.length?b.ch:0)};e&&"string"!=typeof e?e.from?(d=e.from,e=e.to):d=e:"end"==e?d=e=y:"start"==e?d=e=b:"around"==e?(d=b,e=y):(e=function(a){if(x(a,
b))return a;if(!x(c,a))return y;var d=a.line+u,e=a.ch;a.line==c.line&&(e=e+(D(o).length-(c.ch-(c.line==b.line?b.ch:0))));return{line:d,ch:e}},d=e(g.sel.from),e=e(g.sel.to));ia(a,d,e,null,!0);return y}}function O(a,b,c,d,e){d||(d=c);if(x(d,c))var f=d,d=c,c=f;return Db(a,c,d,va(b),null,e)}function u(a,b){return a.line==b.line&&a.ch==b.ch}function x(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function w(a,b){if(0>b.line)return{line:0,ch:0};if(b.line>=a.size)return{line:a.size-1,ch:q(a,a.size-
1).text.length};var c=b.ch,d=q(a,b.line).text.length;return null==c||c>d?{line:b.line,ch:d}:0>c?{line:b.line,ch:0}:b}function pc(a,b){a.sel.shift=b?a.sel.shift||T(a):null}function B(a,b,c,d){var e=a.view,f=e.sel.shift;f&&(f=w(e.doc,f),x(f,b)?b=f:x(c,f)&&(c=f));ia(a,b,c,d);a.curOp.userSelChange=!0}function ia(a,b,c,d,e){a.curOp.updateInput=!0;var f=a.view.sel,g=a.view.doc;a.view.goalColumn=null;if(x(c,b))var h=c,c=b,b=h;if(e||!u(b,f.from))b=db(a,b,d,"push"!=e);if(e||!u(c,f.to))c=db(a,c,d,"push"!=e);
if(!u(f.from,b)||!u(f.to,c)){u(b,c)?f.inverted=!1:u(b,f.to)?f.inverted=!1:u(c,f.from)&&(f.inverted=!0);if(a.options.autoClearEmptyLines&&u(f.from,f.to)&&T(a.view).line!=f.from.line&&f.from.line<g.size){var k=q(g,f.from.line);/^\s+$/.test(k.text)&&setTimeout(o(a,function(){if(k.parent&&/^\s+$/.test(k.text)){var b=F(k);O(a,"",{line:b,ch:0},{line:b,ch:k.text.length})}},10))}f.from=b;f.to=c;a.curOp.selectionChanged=!0}}function zc(a){ia(a,a.view.sel.from,a.view.sel.to,null,"push")}function db(a,b,c,d){var e=
a.view.doc,f=!1,g=b,h=c||1;a.view.cantEdit=!1;a:for(;;){var k=q(e,g.line),j;if(k.markedSpans){for(var i=0;i<k.markedSpans.length;++i){var l=k.markedSpans[i],m=l.marker;if((null==l.from||(m.inclusiveLeft?l.from<=g.ch:l.from<g.ch))&&(null==l.to||(m.inclusiveRight?l.to>=g.ch:l.to>g.ch)))if(d&&m.clearOnEnter)(j||(j=[])).push(m);else if(m.atomic){i=m.find()[0>h?"from":"to"];if(u(i,g)&&(i.ch+=h,0>i.ch?i=i.line?w(e,{line:i.line-1}):null:i.ch>k.text.length&&(i=i.line<e.size-1?{line:i.line+1,ch:0}:null),!i)){if(f){if(!d)return db(a,
b,c,!0);a.view.cantEdit=!0;return{line:0,ch:0}}f=!0;i=b;h=-h}g=i;continue a}}if(j)for(i=0;i<j.length;++i)j[i].clear()}return g}}function Bb(a,b,c,d,e){b=hc(a,b,c,d,e);null!=b.scrollTop&&Eb(a,b.scrollTop);null!=b.scrollLeft&&Fb(a,b.scrollLeft)}function hc(a,b,c,d,e){var f=a.display,g=f.lineSpace.offsetTop,c=c+g,e=e+g,h=f.scroller.clientHeight-la,k=f.scroller.scrollTop,j={},a=a.view.doc.height+2*g,i=c<g+10,g=e+g>a-10;c<k?j.scrollTop=i?0:Math.max(0,c):e>k+h&&(j.scrollTop=(g?a:e)-h);c=f.scroller.clientWidth-
la;e=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;h=b<f+10;b<e+f||h?(h&&(b=0),j.scrollLeft=Math.max(0,b-10-f)):d>c+e-3&&(j.scrollLeft=d+10-c);return j}function bb(a,b,c,d){var e=a.view.doc;c||(c="add");if("smart"==c)if(a.view.mode.indent)var f=ra(a,b);else c="prev";var g=a.options.tabSize,h=q(e,b),k=ga(h.text,null,g),j=h.text.match(/^\s*/)[0],i;if("smart"==c&&(i=a.view.mode.indent(f,h.text.slice(j.length),h.text),i==sc)){if(!d)return;c="prev"}"prev"==
c?i=b?ga(q(e,b-1).text,null,g):0:"add"==c?i=k+a.options.indentUnit:"subtract"==c&&(i=k-a.options.indentUnit);i=Math.max(0,i);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(i/g);e;--e)d+=g,c+="\t";d<i&&(c+=Ac(i-d));c!=j&&O(a,c,{line:b,ch:0},{line:b,ch:j.length},"input");h.stateAfter=null}function eb(a,b,c){var d=b,e=b,f=a.view.doc;"number"==typeof b?e=q(f,Math.max(0,Math.min(b,f.size-1))):d=F(b);if(null!=d&&c(e,d))U(a,d,d+1);else return null;return e}function Bc(a,b,c,d){function e(a){var c=
(d?xb:Cc)(j,k,b,!0);if(null==c){if(a=!a)a=h+b,0>a||a==f.size?a=!1:(h=a,a=j=q(f,a));if(a)k=d?(0>b?sa:Sa)(j):0>b?j.text.length:0;else return!1}else k=c;return!0}var f=a.view.doc,g=T(a.view),h=g.line,k=g.ch,j=q(f,h);if("char"==c)e();else if("column"==c)e(!0);else if("word"==c)for(c=!1;!(0>b)||e();){if(fb(j.text.charAt(k)))c=!0;else if(c){0>b&&(b=1,e());break}if(0<b&&!e())break}return db(a,{line:h,ch:k},b,!0)}function oc(a,b){var c=b.ch,d=b.ch;if(a){!1===b.after||d==a.length?--c:++d;for(var e=a.charAt(c),
e=fb(e)?fb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!fb(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:{line:b.line,ch:c},to:{line:b.line,ch:d}}}function ld(a,b){B(a,{line:b,ch:0},w(a.view.doc,{line:b+1,ch:0}))}function v(a,b,c,d){n.defaults[a]=b;c&&(ca[a]=d?function(a,b,d){d!=Sb&&c(a,b,d)}:c)}function fa(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));
c[d]=e}return c}function dc(a,b,c){return a.startState?a.startState(b,c):!0}function Ib(a){return"string"==typeof a?P[a]:a}function $a(a,b,c,d,e){function f(b){var b=Ib(b),c=b[a];if(!1===c)return e&&e(),!0;if(null!=c&&d(c))return!0;if(b.nofallthrough)return e&&e(),!0;b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return f(b);for(var c=0,k=b.length;c<k;++c)if(f(b[c]))return!0;return!1}return b&&f(b)?!0:f(c)}function vc(a){a=$[C(a,"keyCode")];return"Ctrl"==
a||"Alt"==a||"Shift"==a||"Mod"==a}function Ca(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function Lb(a,b){this.lines=[];this.type=b;this.cm=a}function Dc(a,b,c,d,e){var f=a.view.doc,g=new Lb(a,e);if("range"==e&&!x(b,c))return g;if(d)for(var h in d)d.hasOwnProperty(h)&&(g[h]=d[h]);g.replacedWith&&(g.collapsed=!0,g.replacedWith=r("span",[g.replacedWith],"CodeMirror-widget"));g.collapsed&&(pa=!0);var k=b.line,j=0,i,l;f.iter(k,c.line+1,function(a){var d={from:null,to:null,marker:g};j=
j+a.text.length;if(k==b.line){d.from=b.ch;j=j-b.ch}if(k==c.line){d.to=c.ch;j=j-(a.text.length-c.ch)}if(g.collapsed){k==c.line&&(l=gb(a,c.ch));k==b.line?i=gb(a,b.ch):S(a,0)}a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.lines.push(a);g.collapsed&&(k==b.line&&R(a))&&S(a,0);++k});g.readOnly&&(wc=!0,(a.view.history.done.length||a.view.history.undone.length)&&a.clearHistory());if(g.collapsed){if(i!=l)throw Error("Inserting collapsed marker overlapping an existing one");g.size=j;g.atomic=
!0}(g.className||g.startStyle||g.endStyle||g.collapsed)&&U(a,b.line,c.line+1);g.atomic&&zc(a);return g}function hb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function qd(a,b,c,d,e){if(!a&&!b)return e;if(a)for(var f=0,g;f<a.length;++f){var h=a[f],k=h.marker;if(null==h.from||(k.inclusiveLeft?h.from<=c:h.from<c)||"bookmark"==k.type&&h.from==c){var j=null==h.to||(k.inclusiveRight?h.to>=c:h.to>c);(g||(g=[])).push({from:h.from,to:j?null:h.to,marker:k})}}a=g;if(b)for(var f=
0,i;f<b.length;++f)if(g=b[f],h=g.marker,null==g.to||(h.inclusiveRight?g.to>=d:g.to>d)||"bookmark"==h.type&&g.from==d&&g.from!=c)k=null==g.from||(h.inclusiveLeft?g.from<=d:g.from<d),(i||(i=[])).push({from:k?null:g.from-d,to:null==g.to?null:g.to-d,marker:h});b=i;i=1==e.length;f=H(e).length+(i?c:0);if(a)for(d=0;d<a.length;++d)g=a[d],null==g.to&&((h=hb(b,g.marker))?i&&(g.to=null==h.to?null:h.to+f):g.to=c);if(b)for(d=0;d<b.length;++d)(g=b[d],null!=g.to&&(g.to+=f),null==g.from)?(h=hb(a,g.marker),h||(g.from=
f,i&&(a||(a=[])).push(g))):(g.from+=f,i&&(a||(a=[])).push(g));c=[Ba(e[0],a)];if(!i){i=e.length-2;var l;if(0<i&&a)for(d=0;d<a.length;++d)null==a[d].to&&(l||(l=[])).push({from:null,to:null,marker:a[d].marker});for(d=0;d<i;++d)c.push(Ba(e[d+1],l));c.push(Ba(H(e),b))}return c}function pd(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;if(c.readOnly&&(!d||-1==ib(d,c)))(d||(d=[])).push(c)}});if(!d)return null;a=
[{from:b,to:c}];for(b=0;b<d.length;++b)for(var c=d[b].find(),e=0;e<a.length;++e){var f=a[e];if(x(c.from,f.to)&&!x(c.to,f.from)){var g=[e,1];x(f.from,c.from)&&g.push({from:f.from,to:c.from});x(c.to,f.to)&&g.push({from:c.to,to:f.to});a.splice.apply(a,g);e+=g.length-1}}return a}function gb(a,b){var c=pa&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)if(e=c[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!d||d.width<e.marker.width))d=e.marker;return d}function oa(a){return gb(a,
-1)}function Ka(a){return gb(a,a.text.length+1)}function Na(a,b){for(var c;c=oa(b);)b=q(a,c.find().from.line);return b}function R(a){var b=pa&&a.markedSpans;if(b)for(var c,d=0;d<b.length;++d)if(c=b[d],c.marker.collapsed&&(null==c.from||0==c.from&&c.marker.inclusiveLeft&&Ec(a,c)))return!0}function Ec(a,b){if(null==b.to||b.marker.inclusiveRight&&b.to==a.text.length)return!0;for(var c,d=0;d<a.markedSpans.length;++d)if(c=a.markedSpans[d],c.marker.collapsed&&c.from==b.to&&(c.marker.inclusiveLeft||b.marker.inclusiveRight)&&
Ec(a,c))return!0}function D(a){return"string"==typeof a?a:a.text}function G(a){if("string"==typeof a)return null;for(var a=a.markedSpans,b=null,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return!b?a:b.length?b:null}function Ba(a,b){return b?{text:a,markedSpans:b}:a}function Fc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var d=b[c].marker.lines,e=ib(d,a);d.splice(e,1)}a.markedSpans=null}}function Gc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.lines.push(a);
a.markedSpans=b}}function ka(a,b,c){a={text:a,height:c};Gc(a,b);R(a)&&(a.height=0);return a}function ja(a,b,c,d){b.text=c;b.stateAfter=b.styles=null;null!=b.order&&(b.order=null);Fc(b);Gc(b,d);R(b)?b.height=0:b.height||(b.height=V(a.display));da(a,b,"change")}function bc(a,b,c){var d=a.view.mode,e=a.options.flattenSpans,f=!b.styles,g=0,h="",k=null,a=new Ca(b.text,a.options.tabSize),j=b.styles||(b.styles=[]);for(""==b.text&&d.blankLine&&d.blankLine(c);!a.eol();){var i=d.token(a,c),l=a.current();a.start=
a.pos;!e||k!=i?(h&&(f=f||g>=j.length||h!=j[g]||k!=j[g+1],j[g++]=h,j[g++]=k),h=l,k=i):h+=l;if(5E3<a.pos)break}h&&(f=f||g>=j.length||h!=j[g]||k!=j[g+1],j[g++]=h,j[g++]=k);5E3<a.pos&&(j[g++]=b.text.slice(a.pos),j[g++]=null);g!=j.length&&(j.length=g,f=!0);return f}function cc(a,b,c){var d=a.view.mode,a=new Ca(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!a.eol()&&5E3>=a.pos;)d.token(a,c),a.start=a.pos}function Hc(a){return!a?null:Ic[a]||(Ic[a]="cm-"+a.replace(/ +/g," cm-"))}function Yb(a,
b,c){for(var d,e=b,f,g,h=!0;d=oa(e);)h=!1,e=q(a.view.doc,d.find().from.line),f||(f=e);d={pre:r("pre"),col:0,pos:0,display:!c,measure:null,addedOne:!1,cm:a};e.textClass&&(d.pre.className=e.textClass);do{e.styles||bc(a,e,e.stateAfter=ra(a,F(e)));d.measure=e==b&&c;d.pos=0;d.addToken=d.measure?sd:Jc;c&&(g&&e!=b&&!d.addedOne)&&(c[0]=d.pre.appendChild(Kc(a.display.measure)),d.addedOne=!0);var k;a:{var j=e;g=d;k=j.styles;var i=j.markedSpans;if(i)for(var j=j.text.length,l=0,m=0,p="",o=void 0,n=0,s=void 0,
t=void 0,v=void 0,u=void 0;;){if(n==l){for(var s=t=v="",u=null,n=Infinity,w=null,y=0;y<i.length;++y){var z=i[y],x=z.marker;if(z.from<=l&&(null==z.to||z.to>l)){if(null!=z.to&&n>z.to&&(n=z.to,t=""),x.className&&(s+=" "+x.className),x.startStyle&&z.from==l&&(v+=" "+x.startStyle),x.endStyle&&z.to==n&&(t+=" "+x.endStyle),x.collapsed&&(!u||u.marker.width<x.width))u=z}else z.from>l&&n>z.from&&(n=z.from);"bookmark"==x.type&&(z.from==l&&x.replacedWith)&&(w=x.replacedWith)}if(u&&(u.from||0)==l)if(Lc(g,(null==
u.to?j:u.to)-l,null!=u.from&&u.marker.replacedWith),null==u.to){k=u.marker.find();break a}w&&!u&&Lc(g,0,w)}if(l>=j)break;for(w=Math.min(j,n);;){if(p){y=l+p.length;u||(z=y>w?p.slice(0,w-l):p,g.addToken(g,z,o+s,v,l+z.length==n?t:""));if(y>=w){p=p.slice(w-l);l=w;break}l=y;v=""}p=k[m++];o=Hc(k[m++])}}else for(var m=0;m<k.length;m+=2)g.addToken(g,k[m],Hc(k[m+1]));k=void 0}g=e==f;k&&(e=q(a.view.doc,k.to.line),h=!1)}while(k);c&&!d.addedOne&&(c[0]=d.pre.appendChild(h?r("span"," "):Kc(a.display.measure)));
!d.pre.firstChild&&!R(b)&&d.pre.appendChild(document.createTextNode(" "));return d.pre}function Jc(a,b,c,d,e){if(b){if(Mb.test(b))for(var f=document.createDocumentFragment(),g=0;;){Mb.lastIndex=g;var h=Mb.exec(b),k=h?h.index-g:b.length-g;k&&(f.appendChild(document.createTextNode(b.slice(g,g+k))),a.col+=k);if(!h)break;g+=k+1;"\t"==h[0]?(h=a.cm.options.tabSize,h-=a.col%h,f.appendChild(r("span",Ac(h),"cm-tab")),a.col+=h):(k=r("span","•","cm-invalidchar"),k.title="\\u"+h[0].charCodeAt(0).toString(16),
f.appendChild(k),a.col+=1)}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),a.pre.appendChild(r("span",[f],b));a.pre.appendChild(f)}}function sd(a,b,c,d,e){for(var f=0;f<b.length;++f)f&&(f<b.length-1&&a.cm.options.lineWrapping&&jb.test(b.slice(f-1,f+1)))&&a.pre.appendChild(r("wbr")),a.measure[a.pos++]=Jc(a,b.charAt(f),c,0==f&&d,f==b.length-1&&e);b.length&&(a.addedOne=!0)}function Lc(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.pre.appendChild(c),
a.measure&&b&&(a.measure[a.pos]=c,a.addedOne=!0));a.pos+=b}function Fa(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function Ea(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function q(a,b){for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function S(a,b){for(var c=
b-a.height,d=a;d;d=d.parent)d.height+=c}function F(a){if(null==a.parent)return null;for(var b=a.parent,a=ib(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a}function La(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function qa(a,b){for(var b=Na(a.view.doc,
b),c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function M(a){var b=a.order;null==b&&(b=a.order=td(a.text));return b}function pb(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function rd(a,b,c,d,e,f,g,h,k){var j=a.view.history;j.undone.length=0;var i=+new Date,l=H(j.done);if(l&&(j.lastOp==a.curOp.id||
j.lastOrigin==e&&("input"==e||"delete"==e)&&j.lastTime>i-600)){f=H(l.events);if(f.start>b+d.length||f.start+f.added<b)l.events.push({start:b,added:c,old:d});else{for(var g=Math.max(0,f.start-b),m=Math.max(0,b+d.length-(f.start+f.added)),p=g;0<p;--p)f.old.unshift(d[p-1]);for(p=m;0<p;--p)f.old.push(d[d.length-p]);g&&(f.start=b);f.added+=c-(d.length-g-m)}l.fromAfter=h;l.toAfter=k}else{l={events:[{start:b,added:c,old:d}],fromBefore:f,toBefore:g,fromAfter:h,toAfter:k};for(j.done.push(l);j.done.length>
a.options.undoDepth;)j.done.shift();0>j.dirtyCounter?j.dirtyCounter=NaN:j.dirtyCounter++}j.lastTime=i;j.lastOp=a.curOp.id;j.lastOrigin=e}function ud(){Ua(this)}function wa(a){a.stop||(a.stop=ud);return a}function A(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Mc(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ua(a){A(a);Mc(a)}function qc(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));ea&&(a.ctrlKey&&1==b)&&(b=3);return b}function C(a,
b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function s(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function N(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function ha(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=
Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function da(a,b,c){function d(a){return function(){a.apply(null,f)}}var e=b._handlers&&b._handlers[c];if(e)for(var f=Array.prototype.slice.call(arguments,3),g=a.curOp&&a.curOp.delayedCallbacks,h=0;h<e.length;++h)g?g.push(d(e[h])):e[h].apply(null,f)}function rc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function ob(){this.id=null}function ga(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));
for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function Ac(a){for(;kb.length<=a;)kb.push(H(kb)+" ");return kb[a]}function H(a){return a[a.length-1]}function jc(a){sb?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function ib(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function ec(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function I(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,
b)}}function fb(a){return/\w/.test(a)||""<a&&(a.toUpperCase()!=a.toLowerCase()||vd.test(a))}function Nc(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&a[c]&&++b;return!b}function r(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)Xb(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ia(a){a.innerHTML="";return a}function X(a,b){return Ia(a).appendChild(b)}function Xb(a,b){ab?(a.innerHTML="",a.appendChild(document.createTextNode(b))):
a.textContent=b}function Ma(a){if(null!=lb)return lb;var b=r("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");X(a,b);b.offsetWidth&&(lb=b.offsetHeight-b.clientHeight);return lb||0}function Kc(a){if(null==Nb){var b=r("span","​");X(a,r("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Nb=1>=b.offsetWidth&&2<b.offsetHeight&&!ma)}return Nb?r("span","​"):r("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function bd(a,b,c,d){if(!a)return d(b,
c,"ltr");for(var e=0;e<a.length;++e){var f=a[e];f.from<c&&f.to>b&&d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr")}}function Ob(a){return a.level%2?a.from:a.to}function Sa(a){return(a=M(a))?a[0].level%2?a[0].to:a[0].from:0}function sa(a){var b=M(a);return!b?a.text.length:Ob(H(b))}function Oc(a,b){var c=q(a.view.doc,b),d=Na(a.view.doc,c);d!=c&&(b=F(d));c=M(d);d=!c?0:c[0].level%2?sa(d):Sa(d);return{line:b,ch:d}}function wd(a,b){for(var c,d;c=Ka(d=q(a.view.doc,b));)b=c.find().to.line;c=
M(d);d=!c?d.text.length:c[0].level%2?Sa(d):sa(d);return{line:b,ch:d}}function xb(a,b,c,d){var e=M(a);if(!e)return Cc(a,b,c,d);for(var d=d?function(b,c){do b+=c;while(0<b&&yb.test(a.text.charAt(b)));return b}:function(a,b){return a+b},f=e[0].level,g=0;g<e.length;++g){var h=e[g],k=h.level%2==f;if(h.from<b&&h.to>b||k&&(h.from==b||h.to==b))break}for(b=d(b,h.level%2?-c:c);null!=b;)if(h.level%2==f)if(b<h.from||b>h.to)b=(h=e[g+=c])&&(0<c==h.level%2?d(h.to,-1):d(h.from,1));else break;else if(b==(h.level%
2?h.to:h.from))b=(h=e[--g])&&Ob(h);else if(b==Ob(h))b=(h=e[++g])&&(h.level%2?h.to:h.from);else break;return 0>b||b>a.text.length?null:b}function Cc(a,b,c,d){b+=c;if(d)for(;0<b&&yb.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Z=/gecko\/\d{7}/i.test(navigator.userAgent),aa=/MSIE \d/.test(navigator.userAgent),ma=/MSIE [1-7]\b/.test(navigator.userAgent),ab=/MSIE [1-8]\b/.test(navigator.userAgent),Q=/WebKit\//.test(navigator.userAgent),nd=Q&&/Qt\/\d+\.\d+/.test(navigator.userAgent),
Pc=/Chrome\//.test(navigator.userAgent),Aa=/Opera\//.test(navigator.userAgent),Qc=/Apple Computer/.test(navigator.vendor),tb=/KHTML\//.test(navigator.userAgent),Wc=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Xc=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),fd=/PhantomJS/.test(navigator.userAgent),sb=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ea=sb||/Mac/.test(navigator.platform),wc=!1,pa=!1,Y,Wa,Va,Xa=0,ya,za,Ya,Gb,J=null;aa?J=-0.53:Z?
J=15:Pc?J=-0.7:Qc&&(J=-1/3);var uc,Jb=null,Kb;n.prototype={getValue:function(a){var b=[],c=this.view.doc;c.iter(0,c.size,function(a){b.push(a.text)});return b.join(a||"\n")},setValue:o(null,function(a){var b=this.view.doc,c={line:0,ch:0},d=q(b,b.size-1).text.length;cb(this,c,{line:b.size-1,ch:d},va(a),c,c,"setValue")}),getSelection:function(a){return this.getRange(this.view.sel.from,this.view.sel.to,a)},replaceSelection:o(null,function(a,b,c){var d=this.view.sel;Db(this,d.from,d.to,va(a),b||"around",
c)}),focus:function(){window.focus();E(this);W(this);ta(this)},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,ca.hasOwnProperty(a)&&o(this,ca[a])(this,b,d))},getOption:function(a){return this.options[a]},getMode:function(){return this.view.mode},undo:o(null,function(){yc(this,"undo")}),redo:o(null,function(){yc(this,"redo")}),indentLine:o(null,function(a,b,c){"string"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");0<=a&&a<this.view.doc.size&&
bb(this,a,b,c)}),indentSelection:o(null,function(a){var b=this.view.sel;if(u(b.from,b.to))return bb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)bb(this,b,a)}),historySize:function(){var a=this.view.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.view.history=pb()},markClean:function(){this.view.history.dirtyCounter=0;this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},
getHistory:function(){function a(a){for(var b=0,e=[],f;b<a.length;++b){var g=a[b];e.push({events:f=[],fromBefore:g.fromBefore,toBefore:g.toBefore,fromAfter:g.fromAfter,toAfter:g.toAfter});for(var h=0,g=g.events;h<g.length;++h){var k=[],j=g[h];f.push({start:j.start,added:j.added,old:k});for(var i=0;i<j.old.length;++i)k.push(D(j.old[i]))}}return e}var b=this.view.history;return{done:a(b.done),undone:a(b.undone)}},setHistory:function(a){var b=this.view.history=pb();b.done=a.done;b.undone=a.undone},getTokenAt:function(a){for(var b=
this.view.doc,a=w(b,a),c=ra(this,a.line),d=this.view.mode,b=q(b,a.line),b=new Ca(b.text,this.options.tabSize);b.pos<a.ch&&!b.eol();){b.start=b.pos;var e=d.token(b,c)}return{start:b.start,end:b.pos,string:b.current(),className:e||null,type:e||null,state:c}},getStateAfter:function(a){var b=this.view.doc,a=Math.max(0,Math.min(null==a?b.size-1:a,b.size-1));return ra(this,a+1)},cursorCoords:function(a,b){var c;c=this.view.sel;null==a&&(a=c.inverted);c="object"==typeof a?w(this.view.doc,a):a?c.from:c.to;
return L(this,c,b||"page")},charCoords:function(a,b){return Pa(this,w(this.view.doc,a),b||"page")},coordsChar:function(a){var b=this.display.lineSpace.getBoundingClientRect();return wb(this,a.left-b.left,a.top-b.top)},defaultTextHeight:function(){return V(this.display)},markText:o(null,function(a,b,c){return Dc(this,w(this.view.doc,a),w(this.view.doc,b),c,"range")}),setBookmark:o(null,function(a,b){a=w(this.view.doc,a);return Dc(this,a,a,b?{replacedWith:b}:{},"bookmark")}),findMarksAt:function(a){var b=
this.view.doc,a=w(b,a),c=[];if(b=q(b,a.line).markedSpans)for(var d=0;d<b.length;++d){var e=b[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&c.push(e.marker)}return c},setGutterMarker:o(null,function(a,b,c){return eb(this,a,function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&Nc(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:o(null,function(a){var b=0,c=this,d=c.view.doc;d.iter(0,d.size,function(d){d.gutterMarkers&&d.gutterMarkers[a]&&(d.gutterMarkers[a]=null,U(c,b,b+
1),Nc(d.gutterMarkers)&&(d.gutterMarkers=null));++b})}),addLineClass:o(null,function(a,b,c){return eb(this,a,function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[e]){if(RegExp("\\b"+c+"\\b").test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:o(null,function(a,b,c){return eb(this,a,function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",f=a[e];if(f)if(null==c)a[e]=null;else{var g=f.replace(RegExp("^"+c+"\\b\\s*|\\s*\\b"+c+"\\b"),
"");if(g==f)return!1;a[e]=g||null}else return!1;return!0})}),addLineWidget:o(null,function(a,b,c){var d=c||{};d.node=b;d.noHScroll&&(this.display.alignWidgets=!0);eb(this,a,function(a){(a.widgets||(a.widgets=[])).push(d);d.line=a;return true});return d}),removeLineWidget:o(null,function(a){var b=a.line.widgets,c=F(a.line);if(null!=c){for(var d=0;d<b.length;++d)b[d]==a&&b.splice(d--,1);U(this,c,c+1)}}),lineInfo:function(a){if("number"==typeof a){if(!(0<=a&&a<this.view.doc.size))return null;var b=a,
a=q(this.view.doc,a);if(!a)return null}else if(b=F(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display,a=L(this,w(this.view.doc,a)),g=a.top,h=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("near"==d){var d=
Math.max(f.wrapper.clientHeight,this.view.doc.height),k=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);a.bottom+b.offsetHeight>d&&a.top>b.offsetHeight&&(g=a.top-b.offsetHeight);h+b.offsetWidth>k&&(h=k-b.offsetWidth)}b.style.top=g+f.lineSpace.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&Bb(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},
lineCount:function(){return this.view.doc.size},clipPos:function(a){return w(this.view.doc,a)},getCursor:function(a){var b=this.view.sel;null==a&&(a=b.inverted);return{line:(a?b.from:b.to).line,ch:(a?b.from:b.to).ch}},somethingSelected:function(){return!u(this.view.sel.from,this.view.sel.to)},setCursor:o(null,function(a,b,c){a=w(this.view.doc,"number"==typeof a?{line:a,ch:b||0}:a);(c?B:ia)(this,a,a)}),setSelection:o(null,function(a,b,c){var d=this.view.doc;(c?B:ia)(this,w(d,a),w(d,b||a))}),getLine:function(a){return(a=
this.getLineHandle(a))&&a.text},getLineHandle:function(a){var b=this.view.doc;if(0<=a&&a<b.size)return q(b,a)},getLineNumber:function(a){return F(a)},setLine:o(null,function(a,b){0<=a&&a<this.view.doc.size&&O(this,b,{line:a,ch:0},{line:a,ch:q(this.view.doc,a).text.length})}),removeLine:o(null,function(a){0<=a&&a<this.view.doc.size&&O(this,"",{line:a,ch:0},w(this.view.doc,{line:a+1,ch:0}))}),replaceRange:o(null,function(a,b,c){var d=this.view.doc,b=w(d,b),c=c?w(d,c):b;return O(this,a,b,c)}),getRange:function(a,
b,c){var d=this.view.doc,a=w(d,a),b=w(d,b),e=a.line,f=b.line;if(e==f)return q(d,e).text.slice(a.ch,b.ch);var g=[q(d,e).text.slice(a.ch)];d.iter(e+1,f,function(a){g.push(a.text)});g.push(q(d,f).text.slice(0,b.ch));return g.join(c||"\n")},triggerOnKeyDown:o(null,nc),execCommand:function(a){return Hb[a](this)},moveH:o(null,function(a,b){var c=this.view.sel,d=0>a?c.from:c.to;if(c.shift||u(c.from,c.to))d=Bc(this,a,b,!0);B(this,d,d,a)}),deleteH:o(null,function(a,b){var c=this.view.sel;u(c.from,c.to)?O(this,
"",c.from,Bc(this,a,b,!1),"delete"):O(this,"",c.from,c.to,"delete");this.curOp.userSelChange=!0}),moveV:o(null,function(a,b){var c=this.view,d=c.doc,e=this.display,f=T(c),f=L(this,f,"div"),g=f.left,h;null!=c.goalColumn&&(g=c.goalColumn);"page"==b?(h=Math.min(e.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),h=f.top+a*h):"line"==b&&(h=0<a?f.bottom+3:f.top-3);do{var k=wb(this,g,h);h+=5*a}while(k.outside&&(0>a?0<h:h<d.height));"page"==b&&(e.scrollbarV.scrollTop+=Pa(this,
k,"div").top-f.top);B(this,k,k,a);c.goalColumn=g}),toggleOverwrite:function(){this.display.cursor.className=(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+" CodeMirror-overwrite":this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(a){var b=0,c,d=this.view.doc;d.iter(0,d.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return w(d,{line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;this.view.doc.iter(0,
a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=a);null!=b&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=b);K(this,[])},getScrollInfo:function(){var a=this.display.scroller,b=la;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:function(a){a=a?w(this.view.doc,a):T(this.view);
a=L(this,a);Bb(this,a.left,a.top,a.left,a.bottom)},setSize:function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(""+a)?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.refresh()},on:function(a,b){s(this,a,b)},off:function(a,b){N(this,a,b)},operation:function(a){return o(this,a)()},refresh:function(){Ra(this);K(this,!0,this.view.scrollTop);this.display.scrollbarV.scrollHeight>this.view.scrollTop&&(this.display.scrollbarV.scrollTop=
this.view.scrollTop)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var ca=n.optionHandlers={},mb=n.defaults={},Sb=n.Init={toString:function(){return"CodeMirror.Init"}};v("value","",function(a,b){a.setValue(b)},!0);v("mode",null,Ga,!0);v("indentUnit",2,Ga,!0);v("indentWithTabs",!1);v("smartIndent",!0);v("tabSize",4,function(a){Ga(a);
Ra(a);K(a,!0)},!0);v("electricChars",!0);v("autoClearEmptyLines",!1);v("theme","default",function(a){Ra(a);Rb(a);na(a)},!0);v("keyMap","default",function(a){var b=P[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")});v("extraKeys",null);v("onKeyEvent",null);v("onDragEvent",null);v("lineWrapping",!1,function(a){var b=a.view.doc,c=V(a.display);if(a.options.lineWrapping){a.display.wrapper.className=a.display.wrapper.className+
" CodeMirror-wrap";var d=a.display.scroller.clientWidth/gc(a.display)-3;b.iter(0,b.size,function(a){if(a.height!=0){var b=Math.ceil(a.text.length/d)||1;b!=1&&S(a,b*c)}});a.display.mover.style.minWidth=""}else{a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap","");Tb(a.view);b.iter(0,b.size,function(a){a.height!=0&&S(a,c)})}U(a,0,b.size)},!0);v("gutters",[],function(a){nb(a.options);na(a)},!0);v("lineNumbers",!1,function(a){nb(a.options);na(a)},!0);v("firstLineNumber",
1,na,!0);v("lineNumberFormatter",function(a){return a},na,!0);v("readOnly",!1,function(a,b){if(b=="nocursor"){qb(a);a.display.input.blur()}else b||ba(a,true)});v("dragDrop",!0);v("cursorBlinkRate",530);v("cursorHeight",1);v("workTime",100);v("workDelay",100);v("flattenSpans",!0);v("pollInterval",100);v("undoDepth",40);v("viewportMargin",10,function(a){a.refresh()},!0);v("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});v("autofocus",null);var Rc=n.modes={},Pb=n.mimeModes={};n.defineMode=
function(a,b){!n.defaults.mode&&"null"!=a&&(n.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Rc[a]=b};n.defineMIME=function(a,b){Pb[a]=b};n.resolveMode=function(a){if("string"==typeof a&&Pb.hasOwnProperty(a))a=Pb[a];else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return n.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};n.getMode=function(a,b){var b=n.resolveMode(b),c=Rc[b.name];
if(!c)return n.getMode(a,"text/plain");c=c(a,b);if(Da.hasOwnProperty(b.name)){var d=Da[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c[e]=d[e])}c.name=b.name;return c};n.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});n.defineMIME("text/plain","null");var Da=n.modeExtensions={};n.extendMode=function(a,b){var c=Da.hasOwnProperty(a)?Da[a]:Da[a]={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};n.defineExtension=function(a,b){n.prototype[a]=b};n.defineOption=v;var rb=[];n.defineInitHook=
function(a){rb.push(a)};n.copyState=fa;n.startState=dc;n.innerMode=function(a,b){for(;a.innerMode;)var c=a.innerMode(b),b=c.state,a=c.mode;return c||{mode:a,state:b}};var Hb=n.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!u(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0},"delete"):a.replaceRange("",b,d?c:{line:b.line},"delete")},deleteLine:function(a){var b=a.getCursor().line;
a.replaceRange("",{line:b,ch:0},{line:b},"delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(Oc(a,a.getCursor().line),null,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=Oc(a,b.line),d=a.getLineHandle(c.line),e=M(d);!e||0==e[0].level?(d=Math.max(0,d.text.search(/\S/)),a.setCursor(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d,!0)):a.setCursor(c,
null,!0)},goLineEnd:function(a){a.setCursor(wd(a,a.getCursor().line),null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,
"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t",
"end","input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){o(a,function(){a.replaceSelection("\n","end","input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},P=n.keyMap={};P.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};P.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore",
"Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};P.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore",
"Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};P["default"]=ea?P.macDefault:P.pcDefault;P.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown",
"Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};n.isModifierKey=vc;n.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form){s(a.form,
"submit",c);var f=a.form.submit;try{a.form.submit=function j(){c();a.form.submit=f;a.form.submit();a.form.submit=j}}catch(g){}}a.style.display="none";var h=n(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);h.save=c;h.getTextArea=function(){return a};h.toTextArea=function(){c();a.parentNode.removeChild(h.getWrapperElement());a.style.display="";if(a.form){N(a.form,"submit",c);if(typeof a.form.submit=="function")a.form.submit=f}};return h};Ca.prototype={eol:function(){return this.pos>=this.string.length},
sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=
this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return ga(this.string,this.start,this.tabSize)},indentation:function(){return ga(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;
a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};n.StringStream=Ca;Lb.prototype.clear=function(){if(!this.explicitlyCleared){zb(this.cm);for(var a=null,b=null,c=0;c<this.lines.length;++c){var d=this.lines[c],e=hb(d.markedSpans,this);null!=e.to&&(b=F(d));for(var f=d,g=d.markedSpans,h=e,k=void 0,j=0;j<g.length;++j)g[j]!=h&&(k||(k=[])).push(g[j]);f.markedSpans=k;null!=e.from?a=F(d):this.collapsed&&!R(d)&&S(d,V(this.cm.display))}null!=a&&
U(this.cm,a,b+1);this.lines.length=0;this.explicitlyCleared=!0;this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,zc(this.cm));Ab(this.cm);da(this.cm,this,"clear")}};Lb.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=hb(d.markedSpans,this);if(null!=e.from||null!=e.to)d=F(d),null!=e.from&&(a={line:d,ch:e.from}),null!=e.to&&(b={line:d,ch:e.to})}return"bookmark"==this.type?a:a&&{from:a,to:b}};window.lineIsHidden=R;var Ic={},Mb=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;
Fa.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height;var g=f;g.parent=null;Fc(g);da(c,f,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};
Ea.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;e.remove(a,g,c);this.height-=h-e.height;f==g&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=g))break;a=0}else a-=f}25>this.size-b&&(a=[],this.collapse(a),this.children=[new Fa(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},
insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Fa(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=
this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Ea(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=ib(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Ea(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,
g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};n.e_stop=Ua;n.e_preventDefault=A;n.e_stopPropagation=Mc;n.on=s;n.off=N;n.signal=ha;var la=30,sc=n.Pass={toString:function(){return"CodeMirror.Pass"}};ob.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};n.countColumn=ga;var kb=[""],vd=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,yb=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,
md=function(){if(ab)return!1;var a=r("div");return"draggable"in a||"dragDrop"in a}(),jb=/^$/;Z?jb=/$'/:Qc?jb=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:Pc&&(jb=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var lb,Nb,va=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};
n.splitLines=va;var gd=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)},ic=function(){var a=r("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),$={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",
33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};n.keyNames=$;(function(){for(var a=0;10>a;a++)$[a+48]=""+a;for(a=65;90>=a;a++)$[a]=String.fromCharCode(a);
for(a=1;12>=a;a++)$[a+111]=$[a+63235]="F"+a})();var td=function(){function a(a){return 255>=a?b.charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1791>=a?c.charAt(a-1536):1792<=a&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",
d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,i=[],l=null,m=0,p;m<c;++m)if(i.push(p=a(b.charCodeAt(m))),null==l)if("L"==p)l="L";else if("R"==p||"r"==p)l="R";null==l&&(l="L");for(var m=0,n=l;m<c;++m)p=i[m],"m"==p?i[m]=n:n=p;m=0;for(n=l;m<c;++m)p=i[m],"1"==p&&"r"==n?i[m]="n":f.test(p)&&(n=p,"r"==p&&(i[m]="R"));m=1;for(n=i[0];m<c-1;++m){p=i[m];if("+"==p&&"1"==n&&"1"==i[m+1])i[m]="1";else if(","==p&&
n==i[m+1]&&("1"==n||"n"==n))i[m]=n;n=p}for(m=0;m<c;++m)if(p=i[m],","==p)i[m]="N";else if("%"==p){for(n=m+1;n<c&&"%"==i[n];++n);var o=m&&"!"==i[m-1]||n<c-1&&"1"==i[n]?"1":"N";for(p=m;p<n;++p)i[p]=o;m=n-1}m=0;for(n=l;m<c;++m)p=i[m],"L"==n&&"1"==p?i[m]="L":f.test(p)&&(n=p);for(m=0;m<c;++m)if(e.test(i[m])){for(n=m+1;n<c&&e.test(i[n]);++n);p="L"==(n<c-1?i[n]:l);o="L"==(m?i[m-1]:l)||p?"L":"R";for(p=m;p<n;++p)i[p]=o;m=n-1}for(var l=[],q,m=0;m<c;)if(g.test(i[m])){p=m;for(++m;m<c&&g.test(i[m]);++m);l.push({from:p,
to:m,level:0})}else{o=m;n=l.length;for(++m;m<c&&"L"!=i[m];++m);for(p=o;p<m;)if(h.test(i[p])){o<p&&l.splice(n,0,{from:o,to:p,level:1});o=p;for(++p;p<m&&h.test(i[p]);++p);l.splice(n,0,{from:o,to:p,level:2});o=p}else++p;o<m&&l.splice(n,0,{from:o,to:m,level:1})}if(1==l[0].level&&(q=b.match(/^\s+/)))l[0].from=q[0].length,l.unshift({from:0,to:q[0].length,level:0});if(1==H(l).level&&(q=b.match(/\s+$/)))H(l).to-=q[0].length,l.push({from:c-q[0].length,to:c,level:0});l[0].level!=H(l).level&&l.push({from:c,
to:c,level:l[0].level});return l}}();n.version="3.0 rc1";return n}();