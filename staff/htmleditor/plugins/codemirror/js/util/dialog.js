(function(){function k(g,h){var a=g.getWrapperElement(),a=a.insertBefore(document.createElement("div"),a.firstChild);a.className="CodeMirror-dialog";a.innerHTML="<div>"+h+"</div>";return a}CodeMirror.defineExtension("openDialog",function(g,h){function a(){f||(f=!0,c.parentNode.removeChild(c))}var c=k(this,g),f=!1,i=this,d=c.getElementsByTagName("input")[0],e;if(d)CodeMirror.on(d,"keydown",function(b){if(13==b.keyCode||27==b.keyCode)CodeMirror.e_stop(b),a(),i.focus(),13==b.keyCode&&h(d.value)}),d.focus(),
CodeMirror.on(d,"blur",a);else if(e=c.getElementsByTagName("button")[0])CodeMirror.on(e,"click",function(){a();i.focus()}),e.focus(),CodeMirror.on(e,"blur",a);return a});CodeMirror.defineExtension("openConfirm",function(g,h){function a(){i||(i=!0,c.parentNode.removeChild(c),d.focus())}var c=k(this,g),f=c.getElementsByTagName("button"),i=!1,d=this,e=1;f[0].focus();for(var b=0;b<f.length;++b){var j=f[b];(function(b){CodeMirror.on(j,"click",function(c){CodeMirror.e_preventDefault(c);a();b&&b(d)})})(h[b]);
CodeMirror.on(j,"blur",function(){--e;setTimeout(function(){0>=e&&a()},200)});CodeMirror.on(j,"focus",function(){++e})}})})();