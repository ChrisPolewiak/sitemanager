(function(){function r(d){for(var e=[/for\s*?\((.*?)\)/,/\"(.*?)(\"|$)/,/\'(.*?)(\'|$)/,/\/\*(.*?)(\*\/|$)/,/\/\/.*/],f=[],a=0;a<e.length;a++)for(var c=0;c<d.length;){var b=d.substr(c).match(e[a]);if(null!=b)f.push({start:c+b.index,end:c+b.index+b[0].length}),c+=b.index+Math.max(1,b[0].length);else break}f.sort(function(a,b){return a.start-b.start});return f}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(d){return d.replace(RegExp("(;|\\{|\\})([^\r\n])",
"g"),"$1\n$2")}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(d){var e=0,f=this.jsonMode?function(a){return a.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(a){return a.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},a=r(d),c="";if(null!=a){for(var b=0;b<a.length;b++)if(a[b].start>e&&(c+=f(d.substring(e,a[b].start)),e=a[b].start),a[b].start<=e&&a[b].end>=e)c+=d.substring(e,a[b].end),e=a[b].end;e<d.length&&(c+=
f(d.substr(e)))}else c=f(d);return c.replace(/^\n*|\n*$/,"")}});CodeMirror.extendMode("xml",{commentStart:"<\!--",commentEnd:"--\>",wordWrapChars:[">"],autoFormatLineBreaks:function(d){for(var d=d.split("\n"),e=/(^\s*?<|^[^<]*?)(.+)(>\s*?$|[^>]*?$)/,f=RegExp("<","g"),a=RegExp("(>)([^\r\n])","g"),c=0;c<d.length;c++){var b=d[c].match(e);null!=b&&3<b.length&&(d[c]=b[1]+b[2].replace(f,"\n$&").replace(a,"$1\n$2")+b[3])}return d.join("\n")}});CodeMirror.defineExtension("commentRange",function(d,e,f){var a=
CodeMirror.innerMode(this.getMode(),this.getTokenAt(e).state).mode,c=this;this.operation(function(){if(d)c.replaceRange(a.commentEnd,f),c.replaceRange(a.commentStart,e),e.line==f.line&&e.ch==f.ch&&c.setCursor(e.line,e.ch+a.commentStart.length);else{var b=c.getRange(e,f),m=b.indexOf(a.commentStart),g=b.lastIndexOf(a.commentEnd);-1<m&&(-1<g&&g>m)&&(b=b.substr(0,m)+b.substring(m+a.commentStart.length,g)+b.substr(g+a.commentEnd.length));c.replaceRange(b,e,f)}})});CodeMirror.defineExtension("autoIndentRange",
function(d,e){var f=this;this.operation(function(){for(var a=d.line;a<=e.line;a++)f.indentLine(a,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(d,e){var f=this;f.operation(function(){for(var a=d.line,c=e.line;a<=c;++a){var b={line:a,ch:a==d.line?d.ch:0},m={line:a,ch:a==c?e.ch:null},g;var k=f,n=a,h=b.ch;g=m.ch;var i=k.getMode(),j=k.getLine(n);null==g&&(g=j.length);if(i.innerMode){var k=k.getTokenAt({line:n,ch:h}).state,n=CodeMirror.innerMode(i,k).mode,o=[],l=new CodeMirror.StringStream(j);
for(l.pos=l.start=h;;){i.token(l,k);var q=CodeMirror.innerMode(i,k).mode;if(q!=n){var p=l.start;"xml"==n.name&&">"==j.charAt(l.pos-1)&&(p=l.pos);o.push({from:h,to:p,mode:n});h=p;n=q}if(l.pos>=g)break;l.start=l.pos}h<g&&o.push({from:h,to:g,mode:n});g=o}else g=[{from:h,to:g,mode:i}];h="";i=f.getRange(b,m);for(j=0;j<g.length;++j)k=1<g.length?i.slice(g[j].from,g[j].to):i,h&&(h+="\n"),h=g[j].mode.autoFormatLineBreaks?h+g[j].mode.autoFormatLineBreaks(k):h+i;if(h!=i){g=0;for(i=h.indexOf("\n");-1!=i;i=h.indexOf("\n",
i+1),++g);f.replaceRange(h,b,m);a+=g;c+=g}}for(a=d.line+1;a<=c;++a)f.indentLine(a,"smart");f.setSelection(d,f.getCursor(!1))})})})();